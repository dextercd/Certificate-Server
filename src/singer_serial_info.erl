-module(singer_serial_info).
-export([info_of/1]).

table() ->
	[{"AD", 541546, 551545, {1933, 10, 3}},
	 {"AD", 720746, 730745, {1934, 9, 10}},
	 {"AD", 781846, 791845, {1934, 11, 27}},
	 {"AD", 880156, 890155, {1935, 3, 18}},
	 {"AD", 937406, 947405, {1935, 6, 24}},
	 {"AD", 996956, 999999, {1935, 9, 23}},
	 {"AE", 000001, 007000, {1935, 9, 23}},
	 {"AE", 054366, 064365, {1935, 12, 30}},
	 {"AE", 076516, 086515, {1936, 3, 25}},
	 {"AE", 207616, 222615, {1936, 7, 13}},
	 {"AE", 294041, 309040, {1936, 11, 5}},
	 {"AE", 407941, 422940, {1937, 3, 15}},
	 {"AE", 536641, 556640, {1937, 6, 11}},
	 {"AE", 770591, 790590, {1937, 12, 8}},
	 {"AE", 973541, 993540, {1938, 5, 24}},
	 {"AF", 070706, 090705, {1938, 10, 10}},
	 {"AF", 161806, 181805, {1939, 2, 15}},
	 {"AF", 244106, 264105, {1939, 7, 11}},
	 {"AF", 371856, 391855, {1939, 12, 5}},
	 {"AF", 477181, 497180, {1940, 4, 10}},
	 {"AF", 571881, 596880, {1940, 8, 15}},
	 {"AF", 740751, 760750, {1941, 1, 7}},
	 {"AF", 863951, 883950, {1941, 4, 1}},
	 {"AF", 907451, 942450, {1941, 5, 14}},
	 {"AF", 998251, 999999, {1941, 7, 1}},
	 {"AG", 000001, 018250, {1941, 7, 1}},
	 {"AG", 526101, 546100, {1945, 9, 19}},
	 {"AG", 602856, 622855, {1946, 2, 18}},
	 {"AG", 689391, 709390, {1946, 6, 4}},
	 {"AG", 804771, 824770, {1946, 9, 16}},
	 {"AG", 848346, 858345, {1946, 10, 25}},
	 {"AG", 869446, 889445, {1946, 11, 22}},
	 {"AG", 970946, 990945, {1947, 2, 19}},
	 {"AH", 050371, 070370, {1947, 4, 22}},
	 {"AH", 111971, 131970, {1947, 6, 26}},
	 {"AH", 193771, 223770, {1947, 8, 19}},
	 {"AH", 316071, 346070, {1947, 10, 28}},
	 {"AH", 413571, 443570, {1948, 1, 22}},
	 {"AH", 550921, 580920, {1948, 4, 20}},
	 {"AH", 640321, 670320, {1948, 6, 18}},
	 {"AH", 799121, 829120, {1948, 10, 1}},
	 {"AH", 973921, 999999, {1948, 12, 9}},
	 {"AJ", 000001, 013920, {1948, 12, 9}},
	 {"AJ", 103721, 143720, {1949, 3, 15}},
	 {"AJ", 189171, 229170, {1949, 11, 18}},
	 {"AJ", 348371, 388370, {1950, 1, 23}},
	 {"AJ", 552721, 592720, {1950, 3, 31}},
	 {"AJ", 615621, 655620, {1950, 6, 1}},
	 {"AJ", 781321, 821320, {1950, 8, 22}},
	 {"AJ", 887721, 937720, {1950, 10, 26}},
	 {"AK", 071321, 121320, {1951, 1, 29}},
	 {"AK", 389576, 439575, {1951, 5, 10}},
	 {"AK", 576776, 626775, {1951, 10, 31}},
	 {"AK", 745676, 795675, {1952, 2, 20}},
	 {"AK", 984876, 999999, {1952, 8, 11}},
	 {"AL", 000001, 034875, {1952, 8, 11}},
	 {"AL", 158501, 208500, {1952, 12, 12}},
	 {"AL", 389361, 439360, {1953, 5, 4}},
	 {"AL", 524941, 574940, {1953, 10, 14}},
	 {"AL", 689041, 739040, {1954, 4, 22}},
	 {"AL", 900891, 950890, {1955, 1, 17}},
	 {"AM", 137761, 187760, {1955, 6, 10}},
	 {"AM", 361036, 411035, {1956, 2, 27}},
	 {"AM", 652586, 702585, {1957, 1, 29}},
	 {"AM", 771106, 821105, {1957, 9, 27}},
	 {"EE", 000152, 152720, {1947, 8, 25}},
	 {"EE", 452721, 453220, {1947, 12, 24}},
	 {"EE", 458241, 459240, {1948, 1, 22}},
	 {"EE", 573424, 578423, {1948, 5, 14}},
	 {"EE", 802479, 807478, {1948, 9, 21}},
	 {"EE", 853479, 863478, {1948, 12, 10}},
	 {"EF", 154176, 164175, {1949, 5, 23}},
	 {"EF", 278731, 288730, {1949, 8, 17}},
	 {"EF", 558931, 568930, {1949, 11, 7}},
	 {"EF", 688016, 698015, {1950, 2, 14}},
	 {"EF", 700569, 710568, {1950, 4, 24}},
	 {"EF", 907629, 917628, {1950, 7, 19}},
	 {"EG", 072001, 082000, {1950, 10, 9}},
	 {"EG", 343861, 353860, {1951, 2, 15}},
	 {"EG", 433821, 444820, {1951, 3, 29}},
	 {"EG", 637821, 647820, {1951, 5, 16}},
	 {"EG", 703321, 713320, {1951, 7, 17}},
	 {"EG", 957781, 967780, {1951, 10, 17}},
	 {"EH", 001027, 011026, {1951, 12, 18}},
	 {"EH", 132547, 142546, {1952, 2, 29}},
	 {"EH", 236097, 246096, {1952, 4, 28}},
	 {"EH", 370347, 380346, {1952, 7, 22}},
	 {"EH", 625778, 635777, {1952, 10, 8}},
	 {"EH", 890433, 900432, {1953, 3, 4}},
	 {"EJ", 211989, 216988, {1953, 9, 4}},
	 {"EK", 203139, 213138, {1955, 2, 14}},
	 {"EK", 986373, 991372, {1955, 12, 20}},
	 {"EL", 537735, 542734, {1956, 6, 13}},
	 {"EM", 016257, 021256, {1957, 1, 8}},
	 {"EM", 596007, 601006, {1957, 8, 2}},
	 {"EN", 235134, 238133, {1958, 4, 17}},
	 {"EN", 826834, 829333, {1958, 10, 27}},
	 {"EP", 256021, 257520, {1959, 5, 18}},
	 {"ES", 170544, 175543, {1960, 11, 3}},
	 {"ES", 239244, 249243, {1961, 1, 10}},
	 {"ES", 648144, 658143, {1961, 5, 15}},
	 {"ES", 873744, 883743, {1961, 8, 19}},
	 {"ET", 061345, 071344, {1961, 11, 2}}].

in_batch_pred(Prefix, Nr) ->
	fun({P, S, E, _}) ->
		Prefix =:= P andalso Nr >= S andalso Nr =< E
	end.

info_of(SerialNumber) ->
	{Prefix, NrStr} = lists:split(2, SerialNumber),
	Nr = list_to_integer(NrStr),
	Matches = lists:filter(in_batch_pred(Prefix, Nr), table()),
	case Matches of
		[Only|[]] -> Only;
		_ -> unknown
	end.
